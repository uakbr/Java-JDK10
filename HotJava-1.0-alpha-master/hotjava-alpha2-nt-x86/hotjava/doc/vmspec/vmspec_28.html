<!-- Generated with CERN WebMaker 1.4 -->
<HTML>
<HEAD>
<TITLE>vmspec.: The Virtual Machine Instruction Set- Table Jumping</TITLE>
</HEAD>
<BODY>
<A NAME=HEADING177></A>
<A HREF="vmspec_1.html">Contents</A>       <A HREF="vmspec_27.html">Prev</A>       <A HREF="vmspec_29.html">Next</A>       <A HREF="vmspec_17.html">Up</A>       <P>
<HR>
<H2>The Virtual Machine Instruction Set</H2>
<HR>
<H1>Table Jumping</H1>
<DL>
<DT><A HREF="vmspec_28.html#HEADING178"><B></B>  tableswitch</A><DD>
<DT><A HREF="vmspec_28.html#HEADING179"><B></B>  lookupswitch</A><DD>
</DL>

<HR>

<A NAME=HEADING178></A>
<H3>tableswitch</H3>
Access jump table by index and jump<BR><IMG SRC="instructions_only_Tbl_98.gif"><BR>
<P>
<PRE>
..., index =&gt; ...<P>
</PRE>
tableswitch is a variable length instruction. Immediately after the tableswitch opcode, between zero and three 0's are inserted as padding so that the next byte begins at an address that is a multiple of four. After the padding follow a series of signed 4-byte quantities: default-offset, low, high, and then high-low+1 further signed 4-byte offsets. The high-low+1 signed 4-byte offsets are treated as a 0-based jump table.<P>
The index should be an integer. If index is less than low or index is greater than high, then default-offset is added to the pc. Otherwise, low is subtracted from index, and the index-low'th element of the jump table is extracted, and added to the pc.<P>
<A NAME=HEADING179></A>
<H3>lookupswitch</H3>
Access jump table by key match and jump<BR><IMG SRC="instructions_only_Tbl_99.gif"><BR>
<P>
<PRE>
..., key =&gt; ...<P>
</PRE>
lookupswitch is a variable length instruction. Immediately after the lookupswitch opcode, between zero and three 0's are inserted as padding so that the next byte begins at an address that is a multiple of four. <P>
Immediately after the padding are a series of pairs of signed 4-byte quantities. The first pair is special. The first item of that pair is the default offset, and the second item of that pair gives the number of pairs that follow. Each subsequent pair consists of a match and an offset.<P>
The key should be an integer. The integer key on the stack is compared against each of the matches. If it is equal to one of them, the offset is added to the pc. If the key does not match any of the matches, the default offset is added to the pc.<P>
<HR>
<A HREF="vmspec_1.html">Contents</A>       <A HREF="vmspec_27.html">Prev</A>       <A HREF="vmspec_29.html">Next</A>       <A HREF="vmspec_17.html">Up</A>       <P>
Generated with <A HREF="AboutWebMaker.html">CERN WebMaker</A>
</BODY>
</HTML>
